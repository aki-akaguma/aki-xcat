# Acceptance Criteria for aki-xcat (EARS Format)

## Ubiquitous Requirements

- **UC-1**: The `aki-xcat` shall concatenate the contents of specified inputs and print the result to standard output.
- **UC-2**: The `aki-xcat` shall support the decompression of files in `gzip`, `xz`, `zstd`, `lz4`, and `bzip2` formats.
- **UC-3**: The `aki-xcat` shall be able to process plain (uncompressed) files.
- **UC-4**: The `aki-xcat` shall detect file types based on their magic numbers, not their file extensions.
- **UC-5**: The `aki-xcat`'s core logic shall be encapsulated within a library crate to promote modularity and reuse.

## Event-Driven Requirements

- **EV-1**: When user provides file paths as command-line arguments, the `aki-xcat` shall read and process each specified file in the given order.
- **EV-2**: When no file paths are provided as command-line arguments, the `aki-xcat` shall read from standard input.
- **EV-3**: When a file path is specified as a single dash (`-`), the `aki-xcat` shall read from standard input for that argument.
- **EV-4**: When the help option (`-H` or `--help`) is provided, the `aki-xcat` shall display a help message on standard output and exit gracefully.
- **EV-5**: When the version option (`-V` or `--version`) is provided, the `aki-xcat` shall display version information on standard output and exit gracefully.

## Optional Feature Requirements

- **OF-1**: Where the binary mode option (`-b` or `--bin`) is specified, the `aki-xcat` shall read and output the file(s) in binary mode without any text-based processing.
- **OF-2**: Where the line numbering option (`-n` or `--number`) is specified, the `aki-xcat` shall prepend a continuously incrementing line number to each line of the output.
- **OF-3**: Where the file name option (`-f` or `--file-name`) is specified, the `aki-xcat` shall prepend the base name of the source file to each line of the output.
- **OF-4**: Where the path name option (`--path-name`) is specified, the `aki-xcat` shall prepend the full path of the source file to each line of the output.

## Unwanted Behavior (Error Handling)

- **UW-1**: If a specified file is not found, then the `aki-xcat` shall write a "file not found" error message to standard error and exit with a non-zero status code.
- **UW-2**: If an error occurs during file reading or decompression, then the `aki-xcat` shall write a relevant error message to standard error and exit with a non-zero status code.
- **UW-3**: If the tool encounters a broken pipe error when writing to standard output, then the `aki-xcat` shall exit silently with a zero status code.
- **UW-4**: If an invalid command-line option is provided, then the `aki-xcat` shall write an error message to standard error and exit with a non-zero status code.
